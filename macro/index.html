<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>ê¸€ë¡œë²Œ ë§¤í¬ë¡œ ëŒ€ì‹œë³´ë“œ | Herdvibe</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700;900&family=JetBrains+Mono:wght@400;500;600;700&family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=Bebas+Neue&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
<style>
/* ===== HERDVIBE DESIGN TOKENS ===== */
:root {
  --hv-primary:#3b82f6;--hv-primary-light:#60a5fa;--hv-primary-dark:#2563eb;
  --hv-primary-glow:rgba(59,130,246,0.12);
  --hv-up:#22c55e;--hv-up-bg:rgba(34,197,94,0.1);
  --hv-down:#ef4444;--hv-down-bg:rgba(239,68,68,0.1);
  --hv-warning:#f59e0b;--hv-warning-bg:rgba(245,158,11,0.1);
  --hv-neutral:#6b7280;
  --hv-bg-base:#000;--hv-bg-surface:#0a0a0a;--hv-bg-card:#111;
  --hv-bg-card-hover:#181818;--hv-bg-elevated:#1a1a1a;
  --hv-text-primary:#e5e5e5;--hv-text-secondary:#8a8a8a;
  --hv-text-tertiary:#555;--hv-text-muted:#3a3a3a;
  --hv-border:rgba(255,255,255,0.06);--hv-border-strong:rgba(255,255,255,0.12);
  --hv-font-display:'Plus Jakarta Sans',sans-serif;
  --hv-font-body:'Noto Sans KR',-apple-system,BlinkMacSystemFont,sans-serif;
  --hv-font-mono:'JetBrains Mono','SF Mono',monospace;
  --hv-space-xs:8px;--hv-space-sm:12px;--hv-space-md:16px;
  --hv-space-lg:24px;--hv-space-xl:32px;
  --hv-radius-sm:6px;--hv-radius-md:10px;--hv-radius-lg:14px;
  --hv-shadow-sm:0 1px 3px rgba(0,0,0,.5);--hv-shadow-lg:0 8px 32px rgba(0,0,0,.7);
  --hv-transition-fast:150ms ease;--hv-transition:250ms ease;
  --hv-max-width:1280px;--hv-header-height:60px;--hv-sidebar-width:300px;
  /* Dashboard-specific */
  --blue:#4a9eff;--cyan:#00e5cc;--red:#ff4a6a;--orange:#ff8c42;
  --yellow:#ffd642;--green:#42ff8c;--purple:#a855f7;
}

/* ===== RESET ===== */
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html{font-size:16px;scroll-behavior:smooth;-webkit-font-smoothing:antialiased;overflow-x:hidden}
body{font-family:var(--hv-font-body);background:var(--hv-bg-base);color:var(--hv-text-primary);line-height:1.6;min-height:100vh;overflow-x:hidden}
a{color:var(--hv-primary-light);text-decoration:none}
::selection{background:var(--hv-primary);color:#fff}
::-webkit-scrollbar{width:5px;height:5px}
::-webkit-scrollbar-track{background:var(--hv-bg-base)}
::-webkit-scrollbar-thumb{background:#333;border-radius:3px}

/* ===== HEADER ===== */
.hv-header{position:sticky;top:0;z-index:100;height:var(--hv-header-height);background:rgba(0,0,0,.9);backdrop-filter:blur(20px) saturate(180%);-webkit-backdrop-filter:blur(20px) saturate(180%);border-bottom:1px solid var(--hv-border);display:flex;align-items:center;padding:0 var(--hv-space-lg)}
.hv-header-inner{width:100%;max-width:var(--hv-max-width);margin:0 auto;display:flex;align-items:center;justify-content:space-between;gap:var(--hv-space-md)}
.hv-logo{display:flex;align-items:center;gap:10px;font-family:var(--hv-font-display);font-weight:800;font-size:1.15rem;color:var(--hv-text-primary);text-decoration:none;white-space:nowrap;letter-spacing:-.02em}
.hv-logo-mark{width:28px;height:28px;background:linear-gradient(135deg,var(--hv-primary),#6366f1);border-radius:7px;flex-shrink:0}
.hv-header-center{display:flex;flex-direction:column;min-width:0}
.hv-header-center h1{font-family:var(--hv-font-display);font-size:.938rem;font-weight:600;color:var(--hv-text-primary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.hv-header-category{font-size:.7rem;color:var(--hv-text-tertiary);font-weight:500;text-transform:uppercase;letter-spacing:.08em}
.hv-header-right{display:flex;align-items:center;gap:var(--hv-space-xs);flex-shrink:0}
.hv-update-badge{font-family:var(--hv-font-mono);font-size:.688rem;color:var(--hv-text-tertiary);white-space:nowrap;display:flex;align-items:center;gap:6px}
.hv-live-dot{width:5px;height:5px;background:var(--hv-up);border-radius:50%;animation:pulse 2s infinite}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.3}}

/* ===== LAYOUT ===== */
.hv-page{max-width:var(--hv-max-width);margin:0 auto;padding:var(--hv-space-lg)}
.hv-layout{display:grid;grid-template-columns:1fr var(--hv-sidebar-width);gap:var(--hv-space-lg)}
.hv-main{min-width:0}
.hv-side{display:flex;flex-direction:column;gap:var(--hv-space-lg)}

/* ===== ARTICLE ===== */
.hv-article{background:var(--hv-bg-card);border:1px solid var(--hv-border);border-radius:var(--hv-radius-lg);padding:var(--hv-space-xl);margin-bottom:var(--hv-space-lg)}
.hv-article h2{font-family:var(--hv-font-display);font-size:1.05rem;font-weight:700;color:var(--hv-text-primary);margin-bottom:var(--hv-space-md)}
.hv-article p{font-size:.9rem;line-height:1.8;color:var(--hv-text-secondary);margin-bottom:var(--hv-space-md)}
.hv-article p:last-child{margin-bottom:0}
.hv-article strong{color:var(--hv-text-primary);font-weight:600}
.hv-callout{background:var(--hv-primary-glow);border-left:3px solid var(--hv-primary);padding:14px 20px;border-radius:0 var(--hv-radius-sm) var(--hv-radius-sm) 0;margin:var(--hv-space-lg) 0}
.hv-callout p{color:var(--hv-text-primary);margin:0;font-size:.875rem}

/* ===== AD SLOTS ===== */
.hv-ad{display:flex;align-items:center;justify-content:center;background:var(--hv-bg-surface);border:1px dashed rgba(255,255,255,.04);border-radius:var(--hv-radius-md);position:relative;margin:var(--hv-space-lg) 0;color:var(--hv-text-muted);font-size:.7rem}
.hv-ad--top{min-height:90px;max-width:728px;margin-left:auto;margin-right:auto}
.hv-ad--side{min-height:250px;max-width:300px}
.hv-ad--inline{min-height:70px}
.hv-ad--mobile{min-height:100px;display:none}
.hv-ad::before{content:'Ad';position:absolute;top:4px;left:8px;font-size:.563rem;color:rgba(255,255,255,.12);text-transform:uppercase;letter-spacing:.1em}

/* ===== SIDEBAR NAV ===== */
.side-nav{background:var(--hv-bg-card);border:1px solid var(--hv-border);border-radius:var(--hv-radius-lg);overflow:hidden}
.side-nav-title{padding:12px 20px;font-size:.7rem;font-weight:600;color:var(--hv-text-tertiary);text-transform:uppercase;letter-spacing:.06em;border-bottom:1px solid var(--hv-border)}
.side-nav a{display:block;padding:10px 20px;font-size:.838rem;color:var(--hv-text-secondary);border-bottom:1px solid var(--hv-border);transition:all var(--hv-transition-fast)}
.side-nav a:last-child{border-bottom:none}
.side-nav a:hover{background:var(--hv-bg-card-hover);color:var(--hv-text-primary)}
.side-nav a.active{color:var(--hv-primary-light);background:var(--hv-primary-glow);border-left:3px solid var(--hv-primary)}

/* ===== SHARE BAR ===== */
.share-bar{display:flex;align-items:center;justify-content:space-between;padding:12px var(--hv-space-lg);border-top:1px solid var(--hv-border);background:var(--hv-bg-surface);border-radius:0 0 var(--hv-radius-lg) var(--hv-radius-lg)}
.share-bar-preview{font-size:.75rem;color:var(--hv-text-tertiary);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:50%;line-height:1.4;font-family:var(--hv-font-mono)}
.share-bar-preview span{color:var(--hv-text-secondary);font-weight:500}
.share-bar-buttons{display:flex;align-items:center;gap:6px;flex-shrink:0}
.share-btn{display:inline-flex;align-items:center;gap:6px;padding:7px 14px;border-radius:6px;font-size:.75rem;font-weight:600;font-family:var(--hv-font-body);cursor:pointer;transition:all var(--hv-transition-fast);border:1px solid var(--hv-border-strong);background:var(--hv-bg-card);color:#999;white-space:nowrap}
.share-btn:hover{transform:translateY(-1px);box-shadow:var(--hv-shadow-sm);color:var(--hv-text-primary)}
.share-btn svg{flex-shrink:0}
.share-btn--x:hover{border-color:#fff;color:#fff;background:#111}
.share-btn--kakao:hover{border-color:#FEE500;color:#191919;background:#FEE500}
.share-btn--tg:hover{border-color:#26A5E4;color:#fff;background:rgba(38,165,228,.15)}
.share-btn--copy:hover{border-color:var(--hv-primary);color:var(--hv-primary-light);background:var(--hv-primary-glow)}

/* ===== TOAST ===== */
.toast-wrap{position:fixed;bottom:20px;right:20px;z-index:200;display:flex;flex-direction:column;gap:8px}
.toast{background:var(--hv-bg-elevated);border:1px solid var(--hv-border-strong);border-radius:var(--hv-radius-md);padding:10px 18px;font-size:.788rem;color:var(--hv-text-primary);box-shadow:var(--hv-shadow-lg);animation:toastIn .3s ease;border-left:3px solid var(--hv-up)}
@keyframes toastIn{from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}

/* ===== DASHBOARD GRID ===== */
.dash-grid{display:grid;grid-template-columns:repeat(12,1fr);gap:14px}
.card{background:var(--hv-bg-card);border:1px solid var(--hv-border);border-radius:var(--hv-radius-lg);padding:18px 20px 16px;position:relative;overflow:visible;animation:fadeUp .5s ease both}
.card:nth-child(1){animation-delay:.05s}.card:nth-child(2){animation-delay:.08s}
.card:nth-child(3){animation-delay:.11s}.card:nth-child(4){animation-delay:.14s}
.card:nth-child(5){animation-delay:.17s}.card:nth-child(6){animation-delay:.20s}
.card:nth-child(7){animation-delay:.23s}.card:nth-child(8){animation-delay:.26s}
@keyframes fadeUp{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}

.card-label{font-family:var(--hv-font-mono);font-size:10px;font-weight:500;color:var(--hv-text-muted);text-transform:uppercase;letter-spacing:1.5px;margin-bottom:4px}
.card-title{font-size:15px;font-weight:700;margin-bottom:2px;display:flex;align-items:center;gap:7px}
.card-desc{font-size:11.5px;color:var(--hv-text-secondary);margin-bottom:14px;line-height:1.5}

/* ===== PERIOD TABS ===== */
.tabs{display:flex;gap:4px;margin-bottom:14px;flex-wrap:wrap}
.tab{padding:5px 12px;border-radius:6px;font-family:var(--hv-font-mono);font-size:10.5px;font-weight:500;color:var(--hv-text-muted);background:transparent;border:1px solid transparent;cursor:pointer;transition:all .2s;user-select:none}
.tab:hover{color:var(--hv-text-secondary);background:rgba(255,255,255,.03)}
.tab.active{color:var(--cyan);background:rgba(0,229,204,.08);border-color:rgba(0,229,204,.2)}

/* ===== STAT CARDS ===== */
.stats{display:flex;gap:10px;margin-bottom:14px;flex-wrap:wrap}
.stat{background:rgba(255,255,255,.02);border:1px solid var(--hv-border);border-radius:8px;padding:10px 14px;min-width:0;flex:1}
.stat-flag{font-size:16px;margin-bottom:2px}
.stat-val{font-family:var(--hv-font-mono);font-size:20px;font-weight:700;line-height:1.2}
.stat-sub{font-size:10px;color:var(--hv-text-secondary);margin-top:1px}
.stat-chg{font-family:var(--hv-font-mono);font-size:11px;font-weight:600;margin-top:2px}
.up{color:var(--green)}.dn{color:var(--red)}.flat{color:var(--hv-text-muted)}

/* ===== CHART ===== */
.chart-wrap{position:relative;width:100%}
.chart-wrap canvas{width:100%!important}

/* ===== GRID SPANS ===== */
.s12{grid-column:span 12}.s8{grid-column:span 8}.s7{grid-column:span 7}
.s6{grid-column:span 6}.s5{grid-column:span 5}.s4{grid-column:span 4}

/* ===== YIELD CURVE ===== */
.yc-legend{display:flex;gap:16px;margin-bottom:8px;flex-wrap:wrap}
.yc-leg{display:flex;align-items:center;gap:6px;font-size:11px;color:var(--hv-text-secondary)}
.yc-dot{width:10px;height:3px;border-radius:2px}
.spread-box{display:flex;gap:12px;margin-top:10px;flex-wrap:wrap}
.spread-item{display:flex;align-items:center;gap:6px}
.spread-val{font-family:var(--hv-font-mono);font-size:13px;font-weight:600}
.spread-name{font-size:10px;color:var(--hv-text-secondary)}
.badge{display:inline-flex;align-items:center;gap:4px;padding:3px 8px;border-radius:12px;font-family:var(--hv-font-mono);font-size:9.5px;font-weight:600}
.badge-red{background:rgba(255,74,106,.1);color:var(--red)}
.badge-green{background:rgba(66,255,140,.1);color:var(--green)}
.badge-blue{background:rgba(74,158,255,.1);color:var(--blue)}
.badge-yellow{background:rgba(255,214,66,.1);color:var(--yellow)}

/* ===== INTERPRETATION ===== */
.interp{margin-top:12px;padding:10px 14px;border-radius:8px;font-size:11.5px;line-height:1.5}
.interp-green{background:rgba(66,255,140,.05);border:1px solid rgba(66,255,140,.12);color:var(--green)}
.interp-red{background:rgba(255,74,106,.05);border:1px solid rgba(255,74,106,.12);color:var(--red)}
.interp-blue{background:rgba(74,158,255,.05);border:1px solid rgba(74,158,255,.12);color:var(--blue)}
.interp-yellow{background:rgba(255,214,66,.05);border:1px solid rgba(255,214,66,.12);color:var(--yellow)}
.interp strong{font-weight:700}

/* ===== HV CARD (sidebar) ===== */
.hv-card{background:var(--hv-bg-card);border:1px solid var(--hv-border);border-radius:var(--hv-radius-lg);overflow:hidden}
.hv-card-head{display:flex;align-items:center;justify-content:space-between;padding:14px var(--hv-space-lg);border-bottom:1px solid var(--hv-border)}
.hv-card-head h2{font-size:.875rem;font-weight:600;color:var(--hv-text-primary)}
.hv-card-body{padding:var(--hv-space-lg)}

/* ===== RESPONSIVE ===== */
@media(max-width:1024px){
  .hv-layout{grid-template-columns:1fr}
  .hv-side{order:2}
  .hv-ad--side{max-width:100%}
  .s8,.s7,.s6,.s5,.s4{grid-column:span 12}
}
@media(max-width:768px){
  :root{--hv-header-height:52px}
  .hv-page{padding:var(--hv-space-md)}
  .hv-header{padding:0 var(--hv-space-md)}
  .hv-update-badge{display:none}
  .hv-article{padding:var(--hv-space-lg)}
  .hv-ad--top{display:none}
  .hv-ad--mobile{display:flex}
  .dash-grid{gap:10px}
  .card{padding:14px 14px 12px}
  .stats{gap:6px}
  .stat{padding:8px 10px}
  .stat-val{font-size:16px}
  .card-title{font-size:14px}
  .share-bar{flex-direction:column;gap:10px;align-items:stretch}
  .share-bar-preview{max-width:100%}
  .share-bar-buttons{justify-content:center;flex-wrap:wrap}
  .share-btn span.label-text{display:none}
  .share-btn{padding:8px 10px}
}
@media(max-width:520px){
  .hv-page{padding:12px 10px 24px}
}
</style>
</head>
<body>

<!-- ===== HEADER ===== -->
<header class="hv-header">
  <div class="hv-header-inner">
    <a href="/" class="hv-logo"><span class="hv-logo-mark"></span><span>Herdvibe</span></a>
    <div class="hv-header-center">
      <h1>ê¸€ë¡œë²Œ ë§¤í¬ë¡œ ëŒ€ì‹œë³´ë“œ</h1>
      <span class="hv-header-category">Macro</span>
    </div>
    <div class="hv-header-right">
      <div class="hv-update-badge"><span class="hv-live-dot"></span><span id="lastUpdate">ì—…ë°ì´íŠ¸ ì¤‘...</span></div>
    </div>
  </div>
</header>

<div class="hv-page">

  <!-- ===== ARTICLE ===== -->
  <div class="hv-article">
    <h2>ê¸€ë¡œë²Œ ë§¤í¬ë¡œ ê²½ì œ ë¶„ì„</h2>
    <p>ì´ ëŒ€ì‹œë³´ë“œëŠ” <strong>FRED, OECD, IMF</strong> ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ê¸€ë¡œë²Œ ê±°ì‹œê²½ì œ í•µì‹¬ ì§€í‘œ 8ê°€ì§€ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ì¶”ì í•©ë‹ˆë‹¤. ìœ ë™ì„±(M2), ì¤‘ì•™ì€í–‰ ì •ì±…, ê¸ˆë¦¬, ê³ ìš©, ì œì¡°ì—… í™œë™ê¹Œì§€ í•œëˆˆì— íŒŒì•…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
    <div class="hv-callout"><p><strong>í™œìš©ë²•</strong> â€” ê° ì°¨íŠ¸ì˜ ê¸°ê°„ íƒ­(1Y/3Y/5Y/ALL)ì„ í´ë¦­í•˜ë©´ ì›í•˜ëŠ” ê¸°ê°„ì˜ ë°ì´í„°ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì—¬ëŸ¬ ì§€í‘œë¥¼ ì¢…í•©ì ìœ¼ë¡œ ë¶„ì„í•˜ë©´ í˜„ì¬ ê²½ê¸° ì‚¬ì´í´ì˜ ìœ„ì¹˜ë¥¼ íŒŒì•…í•˜ëŠ” ë° ë„ì›€ì´ ë©ë‹ˆë‹¤.</p></div>
    <p>ëª¨ë“  ë°ì´í„°ëŠ” ë§¤ì¼ 07:00 KSTì— ìë™ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤. ì´ ì •ë³´ëŠ” íˆ¬ì ì°¸ê³ ìš©ì´ë©°, íˆ¬ì ì¡°ì–¸ì´ ì•„ë‹™ë‹ˆë‹¤.</p>
  </div>

  <div class="hv-ad hv-ad--top">ê´‘ê³  ì˜ì—­</div>
  <div class="hv-ad hv-ad--mobile">ëª¨ë°”ì¼ ê´‘ê³ </div>

  <!-- ===== LAYOUT ===== -->
  <div class="hv-layout">
    <div class="hv-main">

      <!-- DASHBOARD GRID -->
      <div class="dash-grid">

        <!-- 1. Global M2 -->
        <div class="card s8" id="m2Card">
          <div class="card-label">GLOBAL LIQUIDITY</div>
          <div class="card-title">ğŸ’§ ê¸€ë¡œë²Œ M2 í†µí™”ëŸ‰</div>
          <div class="card-desc">ì „ì„¸ê³„ ì¤‘ì•™ì€í–‰ì´ ê³µê¸‰í•œ ìœ ë™ì„± ì´ëŸ‰. M2 ì¦ê°€ â†’ ìì‚°ì‹œì¥ ìƒìŠ¹ ì••ë ¥</div>
          <div class="tabs" id="m2ModeTabs">
            <div class="tab active" data-mode="total">í•©ì‚°</div>
            <div class="tab" data-mode="countries">êµ­ê°€ë³„</div>
          </div>
          <div class="tabs" id="m2Tabs">
            <div class="tab" data-period="1y">1Y</div>
            <div class="tab" data-period="3y">3Y</div>
            <div class="tab active" data-period="5y">5Y</div>
            <div class="tab" data-period="all">ALL</div>
          </div>
          <div class="stats" id="m2Stats"></div>
          <div class="chart-wrap"><canvas id="m2Chart" height="200"></canvas></div>
        </div>

        <!-- 2. Fed Balance Sheet -->
        <div class="card s4" id="fedCard">
          <div class="card-label">FED BALANCE SHEET</div>
          <div class="card-title">ğŸ›ï¸ ì—°ì¤€ ëŒ€ì°¨ëŒ€ì¡°í‘œ</div>
          <div class="card-desc">ì—°ì¤€ì´ ë³´ìœ í•œ ìì‚° ê·œëª¨. ì¤„ë©´ ê¸´ì¶•(QT), ëŠ˜ë©´ ì™„í™”(QE)</div>
          <div class="tabs" id="fedTabs">
            <div class="tab" data-period="1y">1Y</div>
            <div class="tab" data-period="3y">3Y</div>
            <div class="tab active" data-period="5y">5Y</div>
            <div class="tab" data-period="all">ALL</div>
          </div>
          <div class="stats" id="fedStats"></div>
          <div class="chart-wrap"><canvas id="fedChart" height="180"></canvas></div>
        </div>

        <!-- 3. Yield Curve -->
        <div class="card s6" id="ycCard">
          <div class="card-label">US TREASURY YIELD CURVE</div>
          <div class="card-title">ğŸ“ ë¯¸êµ­ ì¼ë“œì»¤ë¸Œ</div>
          <div class="card-desc">ë¯¸êµ­ êµ­ì±„ ë§Œê¸°ë³„ ê¸ˆë¦¬. ì—­ì „(ë‹¨ê¸°>ì¥ê¸°) ì‹œ ê²½ê¸°ì¹¨ì²´ ì‹ í˜¸</div>
          <div class="yc-legend">
            <div class="yc-leg"><div class="yc-dot" style="background:var(--orange)"></div>í˜„ì¬</div>
            <div class="yc-leg"><div class="yc-dot" style="background:var(--purple);opacity:.5"></div>1ë…„ ì „</div>
          </div>
          <div class="chart-wrap"><canvas id="ycChart" height="200"></canvas></div>
          <div class="spread-box" id="ycSpreads"></div>
        </div>

        <!-- 4. NFCI -->
        <div class="card s6" id="nfciCard">
          <div class="card-label">CHICAGO FED NFCI</div>
          <div class="card-title">ğŸŒ¡ï¸ ê¸ˆìœµìƒí™©ì§€ìˆ˜</div>
          <div class="card-desc">ì‹œì¹´ê³ ì—°ì¤€ NFCI. 0 ì´ìƒì´ë©´ ê¸´ì¶•ì , ì´í•˜ë©´ ì™„í™”ì  ê¸ˆìœµí™˜ê²½</div>
          <div class="tabs" id="nfciTabs">
            <div class="tab" data-period="1y">1Y</div>
            <div class="tab active" data-period="3y">3Y</div>
            <div class="tab" data-period="5y">5Y</div>
            <div class="tab" data-period="all">ALL</div>
          </div>
          <div class="stats" id="nfciStats"></div>
          <div class="chart-wrap"><canvas id="nfciChart" height="200"></canvas></div>
          <div class="interp" id="nfciInterp"></div>
        </div>

        <!-- AD: Inline -->
        <div class="card s12" style="padding:0;background:transparent;border:none;animation:none">
          <div class="hv-ad hv-ad--inline" style="margin:0">ê´‘ê³  ì˜ì—­</div>
        </div>

        <!-- 5. Interest Rates -->
        <div class="card s7" id="ratesCard">
          <div class="card-label">CENTRAL BANK RATES</div>
          <div class="card-title">ğŸ¦ ì£¼ìš”êµ­ ê¸°ì¤€ê¸ˆë¦¬</div>
          <div class="card-desc">ì£¼ìš”êµ­ ì¤‘ì•™ì€í–‰ ê¸°ì¤€ê¸ˆë¦¬ ì¶”ì´. ê¸€ë¡œë²Œ í†µí™”ì •ì±… ë°©í–¥ í™•ì¸</div>
          <div class="tabs" id="ratesTabs">
            <div class="tab" data-period="3y">3Y</div>
            <div class="tab" data-period="5y">5Y</div>
            <div class="tab active" data-period="all">ALL</div>
          </div>
          <div class="stats" id="ratesStats"></div>
          <div class="chart-wrap"><canvas id="ratesChart" height="220"></canvas></div>
        </div>

        <!-- 6. Debt/GDP -->
        <div class="card s5" id="debtCard">
          <div class="card-label">GOVERNMENT DEBT / GDP</div>
          <div class="card-title">ğŸ’³ êµ­ê°€ë¶€ì±„ / GDP</div>
          <div class="card-desc">GDP ëŒ€ë¹„ ì •ë¶€ë¶€ì±„ ë¹„ìœ¨. 100% ì´ˆê³¼ ì‹œ ì¬ì •ê±´ì „ì„± ì£¼ì˜</div>
          <div class="tabs" id="debtTabs">
            <div class="tab" data-period="10y">10Y</div>
            <div class="tab" data-period="20y">20Y</div>
            <div class="tab active" data-period="all">ALL</div>
          </div>
          <div class="stats" id="debtStats"></div>
          <div class="chart-wrap"><canvas id="debtChart" height="220"></canvas></div>
        </div>

        <!-- 7. Global PMI -->
        <div class="card s6" id="pmiCard">
          <div class="card-label">MANUFACTURING PMI</div>
          <div class="card-title">ğŸ­ ê¸€ë¡œë²Œ ì œì¡°ì—… PMI</div>
          <div class="card-desc">ì œì¡°ì—… êµ¬ë§¤ê´€ë¦¬ìì§€ìˆ˜. 50 ì´ìƒ í™•ì¥, ì´í•˜ ìˆ˜ì¶•</div>
          <div class="tabs" id="pmiTabs">
            <div class="tab" data-period="1y">1Y</div>
            <div class="tab" data-period="3y">3Y</div>
            <div class="tab active" data-period="all">ALL</div>
          </div>
          <div class="stats" id="pmiStats"></div>
          <div class="chart-wrap"><canvas id="pmiChart" height="220"></canvas></div>
        </div>

        <!-- 8. Unemployment -->
        <div class="card s6" id="unempCard">
          <div class="card-label">UNEMPLOYMENT RATE</div>
          <div class="card-title">ğŸ‘· ì£¼ìš”êµ­ ì‹¤ì—…ë¥ </div>
          <div class="card-desc">ì£¼ìš”êµ­ ì‹¤ì—…ë¥ . ê³ ìš©ì‹œì¥ì˜ ê±´ê°• ìƒíƒœë¥¼ ë‚˜íƒ€ë‚´ëŠ” í•µì‹¬ ì§€í‘œ</div>
          <div class="tabs" id="unempTabs">
            <div class="tab" data-period="1y">1Y</div>
            <div class="tab" data-period="5y">5Y</div>
            <div class="tab active" data-period="all">ALL</div>
          </div>
          <div class="stats" id="unempStats"></div>
          <div class="chart-wrap"><canvas id="unempChart" height="220"></canvas></div>
        </div>

      </div><!-- dash-grid -->

      <!-- SHARE BAR -->
      <div style="background:var(--hv-bg-card);border:1px solid var(--hv-border);border-radius:var(--hv-radius-lg);margin-top:var(--hv-space-lg);overflow:hidden">
        <div class="share-bar" style="border-top:none">
          <div class="share-bar-preview"><span>ê¸€ë¡œë²Œ ë§¤í¬ë¡œ ëŒ€ì‹œë³´ë“œ</span> â€” herdvibe.com</div>
          <div class="share-bar-buttons">
            <button class="share-btn share-btn--x" onclick="doShare('twitter')"><svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg><span class="label-text">íŠ¸ìœ„í„°</span></button>
            <button class="share-btn share-btn--kakao" onclick="doShare('kakao')"><svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M12 3C6.477 3 2 6.463 2 10.691c0 2.724 1.8 5.112 4.508 6.458l-1.148 4.265a.5.5 0 0 0 .764.533l4.94-3.26c.304.02.612.03.936.03 5.523 0 10-3.462 10-7.735C22 6.463 17.523 3 12 3z"/></svg><span class="label-text">ì¹´ì¹´ì˜¤í†¡</span></button>
            <button class="share-btn share-btn--tg" onclick="doShare('telegram')"><svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.479.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/></svg><span class="label-text">í…”ë ˆê·¸ë¨</span></button>
            <button class="share-btn share-btn--copy" onclick="doShare('link')"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg><span class="label-text">ë§í¬ ë³µì‚¬</span></button>
          </div>
        </div>
      </div>

      <!-- Education -->
      <div class="hv-article" style="margin-top:var(--hv-space-lg)">
        <h2>ë§¤í¬ë¡œ ì§€í‘œ ì½ëŠ” ë²•</h2>
        <p><strong>ìœ ë™ì„±(M2)ì´ ì¦ê°€</strong>í•˜ë©´ ì‹œì¥ì— ëˆì´ í’ë¶€í•´ì ¸ ìì‚° ê°€ê²© ìƒìŠ¹ ì••ë ¥ì´ ë°œìƒí•©ë‹ˆë‹¤. ë°˜ëŒ€ë¡œ <strong>ì—°ì¤€ì´ QT(ê¸´ì¶•)</strong>ë¥¼ í•˜ë©´ ìœ ë™ì„±ì´ ë¹ ì ¸ë‚˜ê°€ë©° ìì‚°ì‹œì¥ì— í•˜ë°© ì••ë ¥ì´ ìƒê¹ë‹ˆë‹¤.</p>
        <p><strong>ì¼ë“œì»¤ë¸Œ ì—­ì „</strong>(ë‹¨ê¸°ê¸ˆë¦¬ > ì¥ê¸°ê¸ˆë¦¬)ì€ ì—­ì‚¬ì ìœ¼ë¡œ ê²½ê¸°ì¹¨ì²´ë¥¼ 12~18ê°œì›” ì•ì„œ ì˜ˆê³ í•˜ëŠ” ì‹ í˜¸ë¡œ ì•Œë ¤ì ¸ ìˆìŠµë‹ˆë‹¤. NFCIê°€ 0 ì´í•˜ë©´ ê¸ˆìœµí™˜ê²½ì´ ì™„í™”ì ì´ë¼ ë¦¬ìŠ¤í¬ ìì‚°ì— ìš°í˜¸ì ì…ë‹ˆë‹¤.</p>
      </div>

      <div class="hv-ad hv-ad--top">ê´‘ê³  ì˜ì—­</div>

    </div>

    <!-- ===== SIDEBAR ===== -->
    <div class="hv-side">
      <div class="hv-ad hv-ad--side">ì‚¬ì´ë“œ ê´‘ê³ </div>
      <nav class="side-nav" id="hv-side-nav">
        <div class="side-nav-title">ê´€ë ¨ ëŒ€ì‹œë³´ë“œ</div>
        <a href="/crypto-prediction/">í¬ë¦½í†  ê°€ê²© ì˜ˆì¸¡</a>
        <a href="/seasonality/">ì‹œì¦Œë„ë¦¬í‹° ë¶„ì„</a>
        <a href="#" class="active">ë§¤í¬ë¡œ ëŒ€ì‹œë³´ë“œ</a>
        <a href="#" style="opacity:0.4;cursor:default">S&P 500 ì „ëµ</a>
        <a href="#" style="opacity:0.4;cursor:default">ë°°ë‹¹ì£¼ ë¶„ì„</a>
      </nav>
      <div class="hv-card">
        <div class="hv-card-head"><h2>ë§¤í¬ë¡œ ìš”ì•½</h2></div>
        <div class="hv-card-body" id="sidebarSummary">
          <div style="display:flex;flex-direction:column;gap:14px">
            <div style="display:flex;justify-content:space-between;align-items:center"><span style="font-size:.788rem;color:var(--hv-text-tertiary)">ê¸€ë¡œë²Œ M2</span><span id="side-m2" style="font-family:var(--hv-font-mono);font-size:.838rem;color:var(--hv-text-primary)">--</span></div>
            <div style="display:flex;justify-content:space-between;align-items:center"><span style="font-size:.788rem;color:var(--hv-text-tertiary)">ì—°ì¤€ ìì‚°</span><span id="side-fed" style="font-family:var(--hv-font-mono);font-size:.838rem;color:var(--hv-text-primary)">--</span></div>
            <div style="display:flex;justify-content:space-between;align-items:center"><span style="font-size:.788rem;color:var(--hv-text-tertiary)">NFCI</span><span id="side-nfci" style="font-family:var(--hv-font-mono);font-size:.838rem;color:var(--hv-text-primary)">--</span></div>
            <div style="display:flex;justify-content:space-between;align-items:center"><span style="font-size:.788rem;color:var(--hv-text-tertiary)">2s10s ìŠ¤í”„ë ˆë“œ</span><span id="side-spread" style="font-family:var(--hv-font-mono);font-size:.838rem;color:var(--hv-text-primary)">--</span></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
/* ===== SHARE & TOAST ===== */
var CARD_SHARE_INFO = {
  m2Card: 'ê¸€ë¡œë²Œ M2 í†µí™”ëŸ‰ â€” ì „ì„¸ê³„ ìœ ë™ì„± ì¶”ì ',
  fedCard: 'ì—°ì¤€ ëŒ€ì°¨ëŒ€ì¡°í‘œ â€” QE/QT ëª¨ë‹ˆí„°ë§',
  ycCard: 'ë¯¸êµ­ ì¼ë“œì»¤ë¸Œ â€” ê²½ê¸°ì¹¨ì²´ ì‹ í˜¸ ë¶„ì„',
  nfciCard: 'NFCI ê¸ˆìœµìƒí™©ì§€ìˆ˜ â€” ê¸´ì¶•/ì™„í™” íŒë‹¨',
  ratesCard: 'ì£¼ìš”êµ­ ê¸°ì¤€ê¸ˆë¦¬ â€” ê¸€ë¡œë²Œ í†µí™”ì •ì±…',
  debtCard: 'êµ­ê°€ë¶€ì±„/GDP â€” ì¬ì •ê±´ì „ì„± ë¶„ì„',
  pmiCard: 'ê¸€ë¡œë²Œ ì œì¡°ì—… PMI â€” ê²½ê¸°í™•ì¥/ìˆ˜ì¶•',
  unempCard: 'ì£¼ìš”êµ­ ì‹¤ì—…ë¥  â€” ê³ ìš©ì‹œì¥ ê±´ê°•ë„'
};

function makeShareBar(cardId) {
  var info = CARD_SHARE_INFO[cardId] || 'ê¸€ë¡œë²Œ ë§¤í¬ë¡œ ëŒ€ì‹œë³´ë“œ';
  return '<div style="display:flex;align-items:center;justify-content:space-between;margin-top:14px;padding-top:12px;border-top:1px solid var(--hv-border)"><div style="font-family:var(--hv-font-mono);font-size:.65rem;color:var(--hv-text-muted);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;flex:1;min-width:0;margin-right:8px">herdvibe.com</div><div style="display:flex;gap:4px;flex-shrink:0"><button class="share-btn" onclick="doCardShare(\'' + cardId + '\',\'twitter\')" style="padding:6px 8px;border-radius:5px" title="íŠ¸ìœ„í„°"><svg width="13" height="13" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg></button><button class="share-btn" onclick="doCardShare(\'' + cardId + '\',\'kakao\')" style="padding:6px 8px;border-radius:5px" title="ì¹´ì¹´ì˜¤í†¡"><svg width="13" height="13" viewBox="0 0 24 24" fill="currentColor"><path d="M12 3C6.477 3 2 6.463 2 10.691c0 2.724 1.8 5.112 4.508 6.458l-1.148 4.265a.5.5 0 0 0 .764.533l4.94-3.26c.304.02.612.03.936.03 5.523 0 10-3.462 10-7.735C22 6.463 17.523 3 12 3z"/></svg></button><button class="share-btn" onclick="doCardShare(\'' + cardId + '\',\'telegram\')" style="padding:6px 8px;border-radius:5px" title="í…”ë ˆê·¸ë¨"><svg width="13" height="13" viewBox="0 0 24 24" fill="currentColor"><path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.479.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/></svg></button><button class="share-btn" onclick="doCardShare(\'' + cardId + '\',\'link\')" style="padding:6px 8px;border-radius:5px" title="ë§í¬ ë³µì‚¬"><svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg></button></div></div>';
}

function injectShareBars() {
  Object.keys(CARD_SHARE_INFO).forEach(function(cardId) {
    var card = document.getElementById(cardId);
    if (card) {
      card.insertAdjacentHTML('beforeend', makeShareBar(cardId));
    }
  });
}

function doCardShare(cardId, p) {
  var u = location.href;
  var info = CARD_SHARE_INFO[cardId] || 'ê¸€ë¡œë²Œ ë§¤í¬ë¡œ ëŒ€ì‹œë³´ë“œ';
  var t = info + ' | herdvibe.com';
  if (p === 'link') { navigator.clipboard.writeText(u).then(function() { toast('ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤'); }); }
  else if (p === 'twitter') { window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent(t) + '&url=' + encodeURIComponent(u), '_blank'); }
  else if (p === 'telegram') { window.open('https://t.me/share/url?url=' + encodeURIComponent(u) + '&text=' + encodeURIComponent(t), '_blank'); }
  else { toast('ì¹´ì¹´ì˜¤í†¡ ê³µìœ ëŠ” ì•± í‚¤ ì„¤ì • í›„ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤'); }
}

function doShare(p){var u=location.href,t='ê¸€ë¡œë²Œ ë§¤í¬ë¡œ ëŒ€ì‹œë³´ë“œ â€” M2, ê¸ˆë¦¬, ì¼ë“œì»¤ë¸Œ ì‹¤ì‹œê°„ ë¶„ì„ | herdvibe.com';if(p==='link')navigator.clipboard.writeText(u).then(function(){toast('ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤')});else if(p==='twitter')window.open('https://twitter.com/intent/tweet?text='+encodeURIComponent(t)+'&url='+encodeURIComponent(u),'_blank');else if(p==='telegram')window.open('https://t.me/share/url?url='+encodeURIComponent(u)+'&text='+encodeURIComponent(t),'_blank');else toast('ì¹´ì¹´ì˜¤í†¡ ê³µìœ ëŠ” ì•± í‚¤ ì„¤ì • í›„ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤')}
function toast(msg){var c=document.querySelector('.toast-wrap');if(!c){c=document.createElement('div');c.className='toast-wrap';document.body.appendChild(c)}var t=document.createElement('div');t.className='toast';t.textContent=msg;c.appendChild(t);setTimeout(function(){t.style.opacity='0';t.style.transform='translateY(12px)';t.style.transition='.3s';setTimeout(function(){t.remove()},300)},3000)}

/* ===== WATERMARK ===== */
var watermarkPlugin={id:'herdvibeWatermark',beforeDraw:function(ch){var ctx=ch.ctx,ca=ch.chartArea;if(!ca)return;ctx.save();ctx.font='700 28px "Plus Jakarta Sans",sans-serif';ctx.fillStyle='rgba(255,255,255,0.03)';ctx.textAlign='center';ctx.textBaseline='middle';ctx.fillText('Herdvibe.com',(ca.left+ca.right)/2,(ca.top+ca.bottom)/2);ctx.restore()}};
Chart.register(watermarkPlugin);

/* ===== ORIGINAL DASHBOARD LOGIC â€” 100% PRESERVED ===== */
const DATA_BASE = 'https://raw.githubusercontent.com/kittycapital/macro-dashboard/main/data/';
const COLORS = {
  blue:'#4a9eff', cyan:'#00e5cc', red:'#ff4a6a', orange:'#ff8c42',
  yellow:'#ffd642', green:'#42ff8c', purple:'#a855f7',
  us:'#4a9eff', kr:'#00e5cc', eu:'#ffd642', jp:'#ff8c42', cn:'#ff4a6a'
};

Chart.defaults.font.family = "'JetBrains Mono','Noto Sans KR',monospace";
Chart.defaults.font.size = 10;
Chart.defaults.color = '#3a3a52';
Chart.defaults.plugins.legend.display = false;
Chart.defaults.elements.point.radius = 0;
Chart.defaults.elements.point.hoverRadius = 4;
Chart.defaults.elements.line.borderWidth = 2;
Chart.defaults.animation.duration = 600;
Chart.defaults.responsive = true;
Chart.defaults.maintainAspectRatio = false;

const gridColor = 'rgba(255,255,255,0.04)';
const baseScaleOpts = {
  grid:{ color:gridColor, drawBorder:false },
  ticks:{ maxTicksLimit:6, padding:6, font:{size:9} }
};

function hexToRGBA(hex, a) {
  const r=parseInt(hex.slice(1,3),16), g=parseInt(hex.slice(3,5),16), b=parseInt(hex.slice(5,7),16);
  return `rgba(${r},${g},${b},${a})`;
}

function filterByPeriod(dates, values, period) {
  if(period==='all') return {dates,values};
  const now = new Date();
  const map = {'1m':1,'3m':3,'6m':6,'1y':12,'3y':36,'5y':60,'10y':120,'20y':240};
  const months = map[period] || 60;
  const cutoff = new Date(now); cutoff.setMonth(cutoff.getMonth()-months);
  const filtered = dates.reduce((acc,d,i)=>{
    if(new Date(d)>=cutoff){acc.dates.push(d);acc.values.push(values[i]);}
    return acc;
  },{dates:[],values:[]});
  return filtered;
}

function filterMultiByPeriod(dates, seriesObj, period) {
  if(period==='all') return {dates, series:seriesObj};
  const now=new Date(), map={'1m':1,'3m':3,'6m':6,'1y':12,'3y':36,'5y':60,'10y':120,'20y':240};
  const months=map[period]||60;
  const cutoff=new Date(now); cutoff.setMonth(cutoff.getMonth()-months);
  const out={dates:[],series:{}};
  Object.keys(seriesObj).forEach(k=>out.series[k]=[]);
  dates.forEach((d,i)=>{
    if(new Date(d)>=cutoff){
      out.dates.push(d);
      Object.keys(seriesObj).forEach(k=>out.series[k].push(seriesObj[k][i]));
    }
  });
  return out;
}

async function loadJSON(file) {
  const r = await fetch(DATA_BASE+file);
  return r.json();
}

function setupTabs(containerId, callback) {
  const c = document.getElementById(containerId);
  if(!c) return;
  c.querySelectorAll('.tab').forEach(t=>{
    t.addEventListener('click',()=>{
      c.querySelectorAll('.tab').forEach(x=>x.classList.remove('active'));
      t.classList.add('active');
      callback(t.dataset.period || t.dataset.mode);
    });
  });
}

const charts = {};

// 1. GLOBAL M2
let m2Data, m2Mode='total', m2Period='5y';
async function initM2() {
  m2Data = await loadJSON('m2.json');
  renderM2();
  setupTabs('m2ModeTabs', m=>{m2Mode=m; renderM2();});
  setupTabs('m2Tabs', p=>{m2Period=p; renderM2();});
}
function renderM2() {
  const d = m2Data;
  const sh = document.getElementById('m2Stats');
  if(m2Mode==='total') {
    sh.innerHTML = `<div class="stat"><div class="stat-val" style="color:var(--cyan)">$${d.total.current_value}T</div><div class="stat-sub">Total Global M2</div></div><div class="stat"><div class="stat-val ${d.total.yoy_pct>=0?'up':'dn'}">${d.total.yoy_pct>=0?'+':''}${d.total.yoy_pct}%</div><div class="stat-sub">YoY</div></div>`;
  } else {
    sh.innerHTML = Object.values(d.countries).map(c=>`<div class="stat"><div class="stat-flag">${c.flag}</div><div class="stat-chg ${c.yoy_pct>=0?'up':'dn'}">${c.yoy_pct>=0?'+':''}${c.yoy_pct}%</div><div class="stat-sub">${c.name}</div></div>`).join('');
  }
  const ctx = document.getElementById('m2Chart').getContext('2d');
  if(charts.m2) charts.m2.destroy();
  if(m2Mode==='total') {
    const f = filterByPeriod(d.total.dates, d.total.values, m2Period);
    charts.m2 = new Chart(ctx, {type:'line',data:{labels:f.dates,datasets:[{data:f.values,borderColor:COLORS.cyan,backgroundColor:hexToRGBA(COLORS.cyan,0.08),fill:true,tension:0.3}]},options:{scales:{x:baseScaleOpts,y:{...baseScaleOpts,ticks:{...baseScaleOpts.ticks,callback:v=>'$'+v+'T'}}}}});
  } else {
    const f = filterMultiByPeriod(d.countries.us.dates, {us:d.countries.us.values,eu:d.countries.eu.values,jp:d.countries.jp.values,kr:d.countries.kr.values}, m2Period);
    charts.m2 = new Chart(ctx, {type:'line',data:{labels:f.dates,datasets:Object.keys(f.series).map(k=>({label:d.countries[k].name,data:f.series[k],borderColor:COLORS[k],tension:0.3}))},options:{plugins:{legend:{display:true,labels:{boxWidth:10,padding:12,font:{size:10},color:'#6e6e88'}}},scales:{x:baseScaleOpts,y:{...baseScaleOpts,ticks:{...baseScaleOpts.ticks,callback:v=>'$'+v+'T'}}}}});
  }
  document.getElementById('side-m2').textContent = '$'+d.total.current_value+'T';
}

// 2. FED BALANCE SHEET
let fedData, fedPeriod='5y';
async function initFed() {
  fedData = await loadJSON('fed_balance_sheet.json');
  renderFed();
  setupTabs('fedTabs', p=>{fedPeriod=p; renderFed();});
}
function renderFed() {
  const d = fedData;
  document.getElementById('fedStats').innerHTML = `<div class="stat"><div class="stat-val" style="color:var(--blue);font-family:'Bebas Neue',sans-serif;font-size:32px;">$${d.current_value}T</div><div class="stat-sub">Total Assets</div></div><div class="stat"><div class="stat-chg ${d.weekly_change>=0?'up':'dn'}">${d.weekly_change>=0?'+':''}$${(d.weekly_change*1000).toFixed(0)}B/wk</div><div class="stat-sub">ì£¼ê°„ ë³€ë™</div></div>`;
  const f = filterByPeriod(d.dates, d.values, fedPeriod);
  const ctx = document.getElementById('fedChart').getContext('2d');
  if(charts.fed) charts.fed.destroy();
  charts.fed = new Chart(ctx, {type:'line',data:{labels:f.dates,datasets:[{data:f.values,borderColor:COLORS.blue,backgroundColor:hexToRGBA(COLORS.blue,0.08),fill:true,tension:0.3}]},options:{scales:{x:baseScaleOpts,y:{...baseScaleOpts,ticks:{...baseScaleOpts.ticks,callback:v=>'$'+v+'T'}}}}});
  document.getElementById('side-fed').textContent = '$'+d.current_value+'T';
}

// 3. YIELD CURVE
async function initYC() {
  const d = await loadJSON('yield_curve.json');
  const ctx = document.getElementById('ycChart').getContext('2d');
  charts.yc = new Chart(ctx, {type:'line',data:{labels:d.current.maturities,datasets:[{label:'í˜„ì¬',data:d.current.rates,borderColor:COLORS.orange,backgroundColor:hexToRGBA(COLORS.orange,0.06),fill:true,tension:0.3,pointRadius:4,pointHoverRadius:6,pointBackgroundColor:COLORS.orange},{label:'1ë…„ ì „',data:d.one_year_ago.rates,borderColor:hexToRGBA(COLORS.purple,0.4),borderDash:[6,4],tension:0.3,pointRadius:0}]},options:{scales:{x:{...baseScaleOpts,ticks:{...baseScaleOpts.ticks,maxTicksLimit:11}},y:{...baseScaleOpts,ticks:{...baseScaleOpts.ticks,callback:v=>v.toFixed(1)+'%'}}}}});
  const sp = d.spreads;
  const statusClass = s => s==='INVERTED'?'badge-red':s==='FLAT'?'badge-yellow':'badge-green';
  const statusKr = s => s==='INVERTED'?'ì—­ì „':s==='FLAT'?'í”Œë«':'ì •ìƒ';
  document.getElementById('ycSpreads').innerHTML = `<div class="spread-item"><div class="spread-val" style="color:var(--orange)">${sp['2s10s']>=0?'+':''}${(sp['2s10s']*100).toFixed(0)}bp</div><div class="spread-name">2s10s</div></div><div class="spread-item"><div class="spread-val" style="color:var(--purple)">${sp['3m10y']>=0?'+':''}${(sp['3m10y']*100).toFixed(0)}bp</div><div class="spread-name">3m10y</div></div><span class="badge ${statusClass(sp['2s10s_status'])}">${statusKr(sp['2s10s_status'])}</span>`;
  document.getElementById('side-spread').textContent = (sp['2s10s']>=0?'+':'')+(sp['2s10s']*100).toFixed(0)+'bp';
}

// 4. NFCI
let nfciData, nfciPeriod='3y';
async function initNFCI() {
  nfciData = await loadJSON('nfci.json');
  renderNFCI();
  setupTabs('nfciTabs', p=>{nfciPeriod=p; renderNFCI();});
}
function renderNFCI() {
  const d = nfciData;
  const isLoose = d.current_value < 0;
  document.getElementById('nfciStats').innerHTML = `<div class="stat"><div class="stat-val" style="color:var(--${isLoose?'green':'red'});font-family:'Bebas Neue',sans-serif;font-size:32px;">${d.current_value}</div><div class="stat-sub">NFCI Index</div></div><div class="stat"><span class="badge ${isLoose?'badge-green':'badge-red'}">${d.status}</span><div class="stat-sub" style="margin-top:4px">0 ì´ìƒ=ê¸´ì¶• / ì´í•˜=ì™„í™”</div></div>`;
  const f = filterByPeriod(d.dates, d.values, nfciPeriod);
  const ctx = document.getElementById('nfciChart').getContext('2d');
  if(charts.nfci) charts.nfci.destroy();
  charts.nfci = new Chart(ctx, {type:'line',data:{labels:f.dates,datasets:[{data:f.values,borderColor:f.values.map(v=>v>=0?COLORS.red:COLORS.green),segment:{borderColor:ctx2=>{const v=ctx2.p1.parsed.y;return v>=0?COLORS.red:COLORS.green;}},tension:0.3,fill:false}]},options:{scales:{x:baseScaleOpts,y:{...baseScaleOpts}}},plugins:[{id:'zeroLine',afterDraw(chart){const y=chart.scales.y.getPixelForValue(0);const ctx=chart.ctx;ctx.save();ctx.strokeStyle='rgba(255,255,255,0.15)';ctx.lineWidth=1;ctx.setLineDash([4,4]);ctx.beginPath();ctx.moveTo(chart.chartArea.left,y);ctx.lineTo(chart.chartArea.right,y);ctx.stroke();ctx.restore();ctx.fillStyle='rgba(66,255,140,0.4)';ctx.font='9px JetBrains Mono';ctx.fillText('ì™„í™”',chart.chartArea.right-24,y+12);ctx.fillStyle='rgba(255,74,106,0.4)';ctx.fillText('ê¸´ì¶•',chart.chartArea.right-24,y-6);}}]});
  const interp = document.getElementById('nfciInterp');
  if(isLoose) {interp.className='interp interp-green';interp.innerHTML=`<strong>í˜„ì¬: ì™„í™”ì  í™˜ê²½ (${d.current_value})</strong> â€” ìœ ë™ì„±ì´ í’ë¶€í•˜ê³  ì‹œì¥ ìŠ¤íŠ¸ë ˆìŠ¤ê°€ ë‚®ì€ ìƒíƒœ`;}
  else {interp.className='interp interp-red';interp.innerHTML=`<strong>í˜„ì¬: ê¸´ì¶•ì  í™˜ê²½ (${d.current_value})</strong> â€” ê¸ˆìœµí™˜ê²½ì´ íƒ€ì´íŠ¸í•˜ê³  ì‹œì¥ì— ì••ë ¥ì´ ìˆëŠ” ìƒíƒœ`;}
  document.getElementById('side-nfci').textContent = d.current_value;
  document.getElementById('side-nfci').style.color = isLoose ? 'var(--green)' : 'var(--red)';
}

// 5. INTEREST RATES
let ratesData, ratesPeriod='all';
async function initRates() {
  ratesData = await loadJSON('rates.json');
  renderRates();
  setupTabs('ratesTabs', p=>{ratesPeriod=p; renderRates();});
}
function renderRates() {
  const d = ratesData;
  const keys = Object.keys(d.countries);
  document.getElementById('ratesStats').innerHTML = keys.map(k=>{const c=d.countries[k];const chgStr=c.prev_change>0?`â–² +${(c.prev_change*100).toFixed(0)}bp`:c.prev_change<0?`â–¼ ${(c.prev_change*100).toFixed(0)}bp`:'â€” ë™ê²°';const chgClass=c.prev_change>0?'up':c.prev_change<0?'dn':'flat';return `<div class="stat"><div class="stat-flag">${c.flag}</div><div class="stat-val" style="color:${COLORS[k]};font-size:18px;">${c.current}%</div><div class="stat-chg ${chgClass}">${chgStr}</div><div class="stat-sub">${c.name} ${c.bank}</div></div>`;}).join('');
  const f = filterMultiByPeriod(d.dates, d.series, ratesPeriod);
  const ctx = document.getElementById('ratesChart').getContext('2d');
  if(charts.rates) charts.rates.destroy();
  charts.rates = new Chart(ctx, {type:'line',data:{labels:f.dates,datasets:keys.map(k=>({label:d.countries[k].name,data:f.series[k],borderColor:COLORS[k],tension:0,stepped:'before'}))},options:{plugins:{legend:{display:true,labels:{boxWidth:10,padding:12,font:{size:10},color:'#6e6e88'}}},scales:{x:baseScaleOpts,y:{...baseScaleOpts,ticks:{...baseScaleOpts.ticks,callback:v=>v+'%'}}}}});
}

// 6. DEBT / GDP
let debtData, debtPeriod='all';
async function initDebt() {
  debtData = await loadJSON('debt_gdp.json');
  renderDebt();
  setupTabs('debtTabs', p=>{debtPeriod=p; renderDebt();});
}
function renderDebt() {
  const d = debtData;
  const keys = Object.keys(d.countries);
  document.getElementById('debtStats').innerHTML = keys.map(k=>{const c=d.countries[k];const cls=c.current>=100?'dn':c.current>=80?'':'up';return `<div class="stat"><div class="stat-flag">${c.flag}</div><div class="stat-val ${cls}" style="font-size:18px;">${c.current}%</div><div class="stat-sub">${c.name}</div></div>`;}).join('');
  const f = filterMultiByPeriod(d.dates, d.series, debtPeriod);
  const ctx = document.getElementById('debtChart').getContext('2d');
  if(charts.debt) charts.debt.destroy();
  charts.debt = new Chart(ctx, {type:'line',data:{labels:f.dates,datasets:keys.map(k=>({label:d.countries[k].name,data:f.series[k],borderColor:COLORS[k],tension:0.3}))},options:{plugins:{legend:{display:true,labels:{boxWidth:10,padding:12,font:{size:10},color:'#6e6e88'}}},scales:{x:baseScaleOpts,y:{...baseScaleOpts,ticks:{...baseScaleOpts.ticks,callback:v=>v+'%'}}}},plugins:[{id:'line100',afterDraw(chart){const y=chart.scales.y.getPixelForValue(100);if(y<chart.chartArea.top||y>chart.chartArea.bottom)return;const ctx=chart.ctx;ctx.save();ctx.strokeStyle='rgba(255,74,106,0.3)';ctx.lineWidth=1;ctx.setLineDash([4,4]);ctx.beginPath();ctx.moveTo(chart.chartArea.left,y);ctx.lineTo(chart.chartArea.right,y);ctx.stroke();ctx.fillStyle='rgba(255,74,106,0.4)';ctx.font='9px JetBrains Mono';ctx.fillText('100%',chart.chartArea.right-28,y-5);ctx.restore();}}]});
}

// 7. GLOBAL PMI
let pmiData, pmiPeriod='all';
async function initPMI() {
  pmiData = await loadJSON('pmi.json');
  renderPMI();
  setupTabs('pmiTabs', p=>{pmiPeriod=p; renderPMI();});
}
function renderPMI() {
  const d = pmiData;
  const keys = Object.keys(d.countries);
  document.getElementById('pmiStats').innerHTML = keys.map(k=>{const c=d.countries[k];const above=c.current>=50;const chgStr=c.prev_change>=0?`â–² +${c.prev_change}`:`â–¼ ${c.prev_change}`;return `<div class="stat"><div class="stat-flag">${c.flag}</div><div class="stat-val ${above?'up':'dn'}" style="font-size:20px;">${c.current}</div><div class="stat-chg ${above?'up':'dn'}">${chgStr}</div><div class="stat-sub">${c.name}</div></div>`;}).join('');
  const f = filterMultiByPeriod(d.dates, d.series, pmiPeriod);
  // Filter out dates where ALL series have null/0 values
  var cleanDates=[], cleanSeries={};
  keys.forEach(k=>cleanSeries[k]=[]);
  f.dates.forEach(function(dt,i){
    var hasData = keys.some(function(k){ var v=f.series[k][i]; return v!==null && v!==undefined && v>1; });
    if(hasData){
      cleanDates.push(dt);
      keys.forEach(function(k){ cleanSeries[k].push(f.series[k][i]); });
    }
  });
  const ctx = document.getElementById('pmiChart').getContext('2d');
  if(charts.pmi) charts.pmi.destroy();
  charts.pmi = new Chart(ctx, {type:'line',data:{labels:cleanDates,datasets:keys.map(k=>({label:d.countries[k].name,data:cleanSeries[k],borderColor:COLORS[k],tension:0.3,spanGaps:true}))},options:{plugins:{legend:{display:true,labels:{boxWidth:10,padding:12,font:{size:10},color:'#6e6e88'}}},scales:{x:baseScaleOpts,y:{...baseScaleOpts,min:35,max:65}}},plugins:[{id:'line50',afterDraw(chart){const y=chart.scales.y.getPixelForValue(50);if(y<chart.chartArea.top||y>chart.chartArea.bottom)return;const ctx=chart.ctx;ctx.save();ctx.strokeStyle='rgba(255,255,255,0.12)';ctx.lineWidth=1;ctx.setLineDash([4,4]);ctx.beginPath();ctx.moveTo(chart.chartArea.left,y);ctx.lineTo(chart.chartArea.right,y);ctx.stroke();ctx.fillStyle='rgba(66,255,140,0.3)';ctx.font='9px JetBrains Mono';ctx.fillText('í™•ì¥',chart.chartArea.right-24,y-6);ctx.fillStyle='rgba(255,74,106,0.3)';ctx.fillText('ìˆ˜ì¶•',chart.chartArea.right-24,y+12);ctx.restore();}}]});
}

// 8. UNEMPLOYMENT RATE
let unempData, unempPeriod='all';
async function initUnemp() {
  unempData = await loadJSON('unemployment.json');
  renderUnemp();
  setupTabs('unempTabs', p=>{unempPeriod=p; renderUnemp();});
}
function renderUnemp() {
  const d = unempData;
  const keys = Object.keys(d.countries);
  document.getElementById('unempStats').innerHTML = keys.map(k=>{const c=d.countries[k];const chgStr=c.prev_change>0?`â–² +${c.prev_change}%p`:c.prev_change<0?`â–¼ ${c.prev_change}%p`:'â€” ë™ì¼';const chgClass=c.prev_change>0?'dn':c.prev_change<0?'up':'flat';return `<div class="stat"><div class="stat-flag">${c.flag}</div><div class="stat-val" style="color:${COLORS[k]};font-size:18px;">${c.current}%</div><div class="stat-chg ${chgClass}">${chgStr}</div><div class="stat-sub">${c.name}</div></div>`;}).join('');
  const f = filterMultiByPeriod(d.dates, d.series, unempPeriod);
  const ctx = document.getElementById('unempChart').getContext('2d');
  if(charts.unemp) charts.unemp.destroy();
  charts.unemp = new Chart(ctx, {type:'line',data:{labels:f.dates,datasets:keys.map(k=>({label:d.countries[k].name,data:f.series[k],borderColor:COLORS[k],tension:0.3}))},options:{plugins:{legend:{display:true,labels:{boxWidth:10,padding:12,font:{size:10},color:'#6e6e88'}}},scales:{x:baseScaleOpts,y:{...baseScaleOpts,ticks:{...baseScaleOpts.ticks,callback:v=>v+'%'}}}}});
}

// INIT
async function init() {
  try {
    await Promise.all([initM2(), initFed(), initYC(), initNFCI(), initRates(), initDebt(), initPMI(), initUnemp()]);
    injectShareBars();
    document.getElementById('lastUpdate').textContent = new Date().toLocaleDateString('ko-KR');
  } catch(e) {
    console.error('Dashboard init error:', e);
  }
  sendHeight();
  window.addEventListener('resize', sendHeight);
  new MutationObserver(sendHeight).observe(document.body,{childList:true,subtree:true});
}
function sendHeight() {
  const h = document.documentElement.scrollHeight;
  window.parent.postMessage({type:'resize', height:h},'*');
}
init();
</script>
</body>
</html>
